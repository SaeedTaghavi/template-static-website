define(["underscore","js/components/api_targets","js/components/api_query","js/components/api_request"],function(e,n,i,t){return{__exposeMetadata:function(){var r=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];window.__EXPORT_RESULTS_AS_BIBTEX__=e.once(function(){return new Promise(function(u,s){var a=o.map(function(n){return e.isArray(n.identifier)?n.identifier[0]:n.identifier}),c=r.getPubSub(),f=new t({target:n.EXPORT+"bibtex",query:new i({bibcode:a}),options:{type:"POST",done:function(e){var n=e.export;u({identifiers:a,bibtexString:n})},fail:function(e){return s(e)}}});c.publish(c.EXECUTE_REQUEST,f)})})}}});