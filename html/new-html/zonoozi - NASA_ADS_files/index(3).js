function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}define(["underscore","js/components/api_targets","../actions/index","js/widgets/config","redux"],function(e,t,r,o,s){var a=r.SET_QUERY,n=r.SET_FORMAT,c=r.SET_FORMATS,i=r.SET_CUSTOM_FORMAT,u=r.SET_PROGRESS,S=r.SET_COUNT,p=r.SET_PAGE,_=r.SET_IGNORE,b=r.SET_HAS_ERROR,d=r.SET_SHOW_CLOSER,E=r.SET_ERROR_MSG,g=r.SET_MAX_COUNT,l=r.SET_TOTAL_RECS,T=r.SET_BATCH_SIZE,h=r.REQUEST_IDS,f=r.RECEIVE_IDS,O=r.REQUEST_EXPORT,j=r.RECEIVE_EXPORT,m=r.REQUEST_FAILED,R=r.REQUEST_CANCELLED,A=r.TAKE_SNAPSHOT,y=r.SET_ORIGIN,x=r.SET_SORT,C=r.RESET,F=r.HARD_RESET,w=r.SET_CUSTOM_FORMATS,v=r.SET_BIBTEX_MAX_AUTHORS,B=r.SET_BIBTEX_KEY_FORMAT,M=r.SET_BIBTEX_ABS_MAX_AUTHORS,P=r.SET_BIBTEX_ABS_KEY_FORMAT,I=r.SET_BIBTEX_AUTHOR_CUTOFF,U=r.SET_BIBTEX_ABS_AUTHOR_CUTOFF,X=e.map(o.export.formats,function(t,r){return e.extend(t,{id:String(r)})}),K=s.combineReducers({format:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{label:"BibTeX",value:"bibtex",id:"0"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n:return t.format;default:return e}},formats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return t.formats;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hasError:!1,errorMsg:"Sorry, something happened during the request. Please try again"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return _objectSpread({},e,{hasError:t.hasError});case E:return _objectSpread({},e,{errorMsg:t.errorMsg});default:return e}},exports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,output:"",progress:0,ids:[],sort:"date desc, bibcode desc",count:0,page:0,maxCount:t._limits.ExportWidget.default,batchSize:t._limits.ExportWidget.default,ignore:!1,totalRecs:0,customFormatString:"",customFormats:[],snapshot:{},bibtexKeyFormat:null,bibtexMaxAuthors:0,bibtexAuthorCutoff:200,bibtexABSKeyFormat:null,bibtexABSMaxAuthors:0,bibtexABSAuthorCutoff:200},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case h:return _objectSpread({},e,{isFetching:!0,progress:0});case f:return _objectSpread({},e,{isFetching:!1,progress:100,ids:r.ids});case l:return _objectSpread({},e,{totalRecs:r.totalRecs});case O:return _objectSpread({},e,{isFetching:!0,progress:0});case i:return _objectSpread({},e,{customFormatString:r.format});case w:return _objectSpread({},e,{customFormats:r.customFormats});case v:return _objectSpread({},e,{bibtexMaxAuthors:r.maxAuthors});case B:return _objectSpread({},e,{bibtexKeyFormat:r.keyFormat});case I:return _objectSpread({},e,{bibtexAuthorCutoff:r.payload});case M:return _objectSpread({},e,{bibtexABSMaxAuthors:r.maxAuthors});case P:return _objectSpread({},e,{bibtexABSKeyFormat:r.keyFormat});case U:return _objectSpread({},e,{bibtexABSAuthorCutoff:r.payload});case j:return _objectSpread({},e,{isFetching:!1,progress:100,output:r.exports,ignore:!1});case m:return _objectSpread({},e,{isFetching:!1,progress:0});case R:return _objectSpread({},e,{ignore:!0,isFetching:!1,progress:0,output:""});case _:return _objectSpread({},e,{ignore:r.ignore});case u:return _objectSpread({},e,{progress:r.progress});case T:return _objectSpread({},e,{batchSize:r.batchSize});case S:return _objectSpread({},e,{count:r.count>e.maxCount?e.maxCount:r.count});case g:return _objectSpread({},e,{maxCount:r.maxCount>e.totalRecs?e.totalRecs:r.maxCount});case p:return _objectSpread({},e,{page:r.page});case x:return _objectSpread({},e,{sort:r.sort});case A:return _objectSpread({},e,{snapshot:r.snapshot});case C:return _objectSpread({},e.snapshot,{output:"",snapshot:e.snapshot});default:return e}},main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{query:{},showCloser:!0,showSlider:!0,origin:"results-page",showReset:!0,splitCols:!0,autoSubmit:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return _objectSpread({},e,{showCloser:t.showCloser});case a:return _objectSpread({},e,{query:t.query});case y:return _objectSpread({},e,{showCloser:"results-page"===t.origin,showSlider:"results-page"===t.origin,splitCols:"results-page"===t.origin,showReset:"results-page"===t.origin,autoSubmit:"results-page"!==t.origin,origin:t.origin});default:return e}}});return function(e,t){return t.type===F&&(e=void 0),K(e,t)}});