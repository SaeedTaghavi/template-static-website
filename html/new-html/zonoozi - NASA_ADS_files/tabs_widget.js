define(["underscore","marionette","bootstrap","hbs!js/widgets/tabs/templates/tabs_inner","hbs!js/widgets/tabs/templates/tabs_outer","hbs!js/widgets/tabs/templates/tabs_title"],function(t,e,i,n,s,d){return e.ItemView.extend({className:"s-tabs-widget",activate:function(e){var i,n=[];return t.each(this.widgets,function(t){t.activate(i=e.getHardenedInstance()),n.push({name:t.title,object:t,beehive:i})}),n},initialize:function(e){this.tabs=e.tabs||[],this.widgets=t.map(this.tabs,function(t,e){if(!t.widget)throw new Error('Missing "widget" for: '+t.title+" ["+e+"]");return t.widget.trigger(t.default?"active":"hidden"),t.widget}),this.on("active",this.onActive),this.on("hidden",this.onHidden)},render:function(){this.beforeRender&&this.beforeRender(),this.trigger("before:render",this);var e=$(s()),i=e.find("ul.nav"),r=e.find("div.tab-content");return t.each(this.tabs,function(t){i.append(d({id:t.id,title:t.title,default:t.default})),r.append(n({id:t.id,default:t.default}))},this),this.$el.html(e.html()),t.each(this.tabs,function(t){var e=this;this.$("#"+t.id).append(t.widget.getEl()),this.$('a[href="#'+t.id+'"]').on("show.bs.tab",function(){e.trigger("active",t)}).on("hide.bs.tab",function(){e.trigger("hidden",t)})},this),this.bindUIElements(),this.onRender&&this.onRender(),this.trigger("render",this),this},onDestroy:function(){t.each(this.tabs,function(t){t.widget.destroy?t.widget.destroy():t.widget.remove&&t.widget.remove()},this)},getEl:function(){return this.el&&this.$el.children().length?this.el:this.render().el},onActive:function(t){t.widget.trigger("active")},onHidden:function(t){t.widget.trigger("hidden")}})});